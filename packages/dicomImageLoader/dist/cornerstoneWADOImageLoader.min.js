/*! cornerstoneWADOImageLoader - v0.1.0 - 2014-04-01 | (c) 2014 Chris Hafey | https://github.com/chafey/cornerstoneWADOImageLoader */
!function(a,b){function c(a){var b=a.x00280030;if(b&&b.str.length>0){var c=b.str.split("\\");return{row:parseFloat(c[0]),column:parseFloat(c[1])}}return{row:void 0,column:void 0}}function d(a){var b=a.x00280103.uint16,c=a.x00280100.uint16;return 0===b&&8===c?1:0===b&&16===c?2:1===b&&16===c?3:void 0}function e(a,b){var c=d(a),e=a.x7fe00010,f=e.dataOffset;return 1===c?new Uint8Array(b,f):2===c?new Uint16Array(b,f):3===c?new Int16Array(b,f):void 0}function f(a){var b={intercept:0,slope:1},c=a.x00281052,d=a.x00281053;return c&&c.str.length>0&&(b.intercept=parseFloat(c.str)),d&&d.str.length>0&&(b.slope=parseFloat(d.str)),b}function g(a){var b={windowCenter:void 0,windowWidth:void 0},c=a.x00281050,d=a.x00281051;if(c&&c.str.length>0){var e=c.str.split("\\");b.windowCenter=parseFloat(e[0])}if(d&&d.str.length>0){var f=d.str.split("\\");b.windowWidth=parseFloat(f[0])}return b}function h(a){for(var b=65535,c=-32768,d=a.width*a.height,e=a.storedPixelData,f=0;d>f;f++){var g=e[f];b=Math.min(b,g),c=Math.max(c,g)}a.minPixelValue=b,a.maxPixelValue=c}function i(a){var d=b.parseDicom(a),i=c(d),j=d.x00280010.uint16,k=d.x00280010.uint16,l=f(d),m=g(d),n={minPixelValue:-32767,maxPixelValue:65535,slope:l.slope,intercept:l.intercept,windowCenter:m.windowCenter,windowWidth:m.windowWidth,storedPixelData:e(d,a),rows:j,columns:k,height:j,width:k,color:!1,columnPixelSpacing:i.column,rowPixelSpacing:i.row,data:d};return h(n),n}function j(b){var c=a.Deferred(),d=new XMLHttpRequest;return d.open("get",b,!0),d.responseType="arraybuffer",d.onreadystatechange=function(){if(4===d.readyState)if(200==d.status){var a=i(d.response);c.resolve(a)}else c.reject()},d.send(),c}return b.registerImageLoader("http",j),b.registerImageLoader("https",j),b}($,cornerstone);